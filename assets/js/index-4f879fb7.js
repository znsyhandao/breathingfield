import{r as e,o as a,a as t,w as i,b as n,c as o,t as s,d as l,e as r,n as u,f as c,g as d,h as v,v as m,i as g,F as p,j as _,k as h,l as f,m as y}from"./vue-vendor-a7e05594.js";import{S as w,F as b,P as k,W as x,B as C,a as T,b as $,A as S,c as A,d as E,M as F,e as R,f as M}from"./three-vendor-9cce6b9a.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)}).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?a.credentials="include":"anonymous"===e.crossOrigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();const P={app:{title:"å‘¼å¸å†¥æƒ³åœº",version:"1.0.0",env:"production"},api:{baseUrl:"https://api.example.com",timeout:3e4,retryCount:3},audio:{baseUrl:"/audio/",fallbackUrl:"https://cdn.example.com/audio",preloadCount:3,cacheSize:10},debug:{enabled:!1,logLevel:"error"},features:{voiceRecognition:!0,threeVisualization:!0,multiTrackAudio:!0,speechSynthesis:!0},performance:{maxParticles:5e3,fpsLimit:60,memoryWarningThreshold:.7}},z={class:"container"},B={key:0,class:"debug-info"},I={key:1,class:"audio-loading"},N={key:0,class:"loading-progress"},L={class:"progress-text"},W={class:"input-section"},D={class:"mic-icon"},V={class:"text-input"},O={key:0,class:"offline-warning"},H={key:1,class:"test-buttons"},U={key:2,class:"transcript-box"},j={class:"transcript-text"},q={class:"transcript-time"},G={key:3,class:"analysis-box"},J={class:"analysis-text"},K={class:"emotion-tags"},Q={key:4,class:"suggestions-box"},X={class:"suggestions-grid"},Y=["onClick"],Z={class:"suggestion-icon"},ee={class:"suggestion-title"},ae={class:"suggestion-duration"},te={class:"suggestion-desc"},ie={class:"audio-quality-tag"},ne={key:0,class:"offline-tag"},oe={key:2,class:"player-controls"},se={class:"time-display"},le={class:"breathing-guide"},re={key:0,class:"audio-info"},ue={class:"audio-title"},ce={class:"audio-desc"},de={key:0,class:"audio-source-tag"},ve={key:1,class:"sound-mixer"},me={class:"mixer-sliders"},ge={class:"track-info"},pe={class:"track-icon"},_e={class:"track-name"},he=["value","onInput"],fe={class:"track-volume"},ye={key:2,class:"volume-control"},we={class:"volume-slider-container"},be=["value"],ke={class:"volume-percent"},xe={class:"player-buttons"},Ce={key:3,class:"audio-tips"},Te={class:"tips-content"},$e={class:"tips-text"},Se={key:5,class:"permission-prompt"},Ae={class:"permission-content"},Ee={key:6,class:"performance-warning"},Fe=((e,a)=>{const t=e.__vccOpts||e;for(const[i,n]of a)t[i]=n;return t})({__name:"BreathingField",setup(f){const y=new Map,Fe=e=>{const a=P.audio.baseUrl,t=e.startsWith("/")?e.substring(1):e;return`${a.endsWith("/")?a:a+"/"}${t}`},Re=e(P.debug.enabled),Me=e(null),Pe=e(""),ze=e(navigator.onLine),Be=e(!1),Ie=e(""),Ne=e(""),Le=e(""),We=e([]),De=e(!1),Ve=e([]),Oe=e(!1),He=e(0),Ue=e(600),je=e("#4fc3f7"),qe=e(1),Ge=e(!1),Je=e(""),Ke=e(""),Qe=e(!1),Xe=e(!1),Ye=e(0),Ze=e(null),ea=e(""),aa=e(""),ta=e(.7),ia=e(!1),na=e([]),oa=e(null),sa=e([]);let la=[],ra=null;const ua=e(null);let ca,da,va,ma,ga=null,pa=null,_a=!1;const ha={ancient_melody:"ğŸ¼ å¤æ›²å†¥æƒ³",ancient_meditation:"ğŸ¼ å¤æ›²å†¥æƒ³",nature_sounds:"ğŸŒ¿ è‡ªç„¶å£°æ™¯",sleep_wind_chimes:"ğŸ’¤ ç¡çœ éŸ³ä¹",pure_meditation:"ğŸµ å†¥æƒ³éŸ³ä¹",focus_meditation:"ğŸ¯ ä¸“æ³¨åŠ›è®­ç»ƒ",mianxiaoturelax_state_meditation:"ğŸ˜Œ è½»æ¾çŠ¶æ€",alpha_wavemp3:"ğŸ§  è„‘æ³¢éŸ³ä¹",hypersensitivityepisode:"ğŸ›¡ï¸ è„±æ•è®­ç»ƒ",alphabell:"ğŸ”” é˜¿å°”æ³•é’Ÿé“ƒ",alphameditation:"ğŸ§˜ é˜¿å°”æ³•å†¥æƒ³",alphawave:"ğŸŒŠ é˜¿å°”æ³•æ³¢",meditation_music:"ğŸµ å†¥æƒ³éŸ³ä¹",singing_bowl:"ğŸ¥£ é¢‚é’µ",bell:"ğŸ”” é’Ÿå£°",breath:"ğŸŒ¬ï¸ å‘¼å¸å£°"},fa=()=>{if("memory"in performance){performance.memory}ea.value="æ€§èƒ½æ£€æµ‹å®Œæˆï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°",setTimeout(()=>ea.value="",3e3)},ya=()=>{ze.value=navigator.onLine,ze.value||(ea.value="âš ï¸ æ‚¨å¤„äºç¦»çº¿çŠ¶æ€ï¼Œä»…èƒ½ä½¿ç”¨å·²ç¼“å­˜çš„éŸ³é¢‘",setTimeout(()=>ea.value="",5e3))},wa=()=>{const e=window.SpeechRecognition||window.webkitSpeechRecognition;if(!e)return Je.value="âš ï¸ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«ï¼Œè¯·ä½¿ç”¨Chromeæµè§ˆå™¨",Ke.value="error",setTimeout(()=>{Je.value=""},3e3),!1;try{return pa=new e,pa.continuous=!1,pa.interimResults=!1,pa.lang="zh-CN",pa.maxAlternatives=1,pa.onstart=()=>{Be.value=!0,_a=!0,Je.value="ğŸ¤ æ­£åœ¨è†å¬...è¯·å¼€å§‹è¯´è¯",Ke.value="listening"},pa.onresult=e=>{const a=e.results[0][0],t=a.transcript;a.confidence;Ne.value=t,Ie.value=t,Je.value="âœ… è¯†åˆ«å®Œæˆ",Ke.value="success",Aa(t),setTimeout(()=>{Je.value=""},2e3)},pa.onerror=e=>{Be.value=!1,_a=!1;let a="è¯­éŸ³è¯†åˆ«é”™è¯¯";switch(e.error){case"no-speech":a="æ²¡æœ‰æ£€æµ‹åˆ°è¯­éŸ³ï¼Œè¯·é‡æ–°å°è¯•";break;case"audio-capture":a="æ— æ³•è®¿é—®éº¦å…‹é£";break;case"not-allowed":case"permission-denied":a="éº¦å…‹é£æƒé™è¢«æ‹’ç»",Qe.value=!0;break;default:a=`è¯†åˆ«é”™è¯¯: ${e.error}`}Je.value=`âŒ ${a}`,Ke.value="error",setTimeout(()=>{Je.value=""},3e3)},pa.onend=()=>{Be.value=!1,_a=!1},!0}catch(a){return Je.value="âŒ è¯­éŸ³è¯†åˆ«åˆå§‹åŒ–å¤±è´¥",Ke.value="error",!1}},ba=async()=>{if(!pa){if(!wa())return}if(_a)try{pa.stop()}catch(e){}else try{try{(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(e=>e.stop())}catch(a){return Je.value="âŒ éœ€è¦éº¦å…‹é£æƒé™ï¼Œè¯·ç‚¹å‡»å…è®¸",Ke.value="error",void(Qe.value=!0)}pa.start()}catch(e){Je.value="âŒ å¯åŠ¨å½•éŸ³å¤±è´¥ï¼Œè¯·é‡è¯•",Ke.value="error",Be.value=!1}},ka=async()=>{try{(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(e=>e.stop()),Je.value="âœ… éº¦å…‹é£æƒé™å·²è·å¾—",Ke.value="success",Qe.value=!1,wa(),setTimeout(()=>{Je.value=""},2e3)}catch(e){Je.value="âŒ æ— æ³•è·å–éº¦å…‹é£æƒé™",Ke.value="error"}},xa=e=>{Ne.value=e,Ie.value=e,Aa(e),Je.value="âœ… æµ‹è¯•è¯­éŸ³å·²è¾“å…¥",Ke.value="success",setTimeout(()=>{Je.value=""},2e3)},Ca=async()=>{Xe.value=!0,Ye.value=0,Je.value="ğŸ” æ­£åœ¨è¯Šæ–­éŸ³é¢‘æ–‡ä»¶...",Ke.value="listening";const e=[],a=[Fe("ancient_melody_preserved.ogg"),Fe("focus_meditation.ogg"),Fe("ancient_meditation.ogg"),Fe("sleep_wind_chimes.ogg"),Fe("pure_meditation_alpha_meditation.ogg"),Fe("mianxiaoturelax_state_meditation.ogg"),Fe("alpha_wavemp3.ogg"),Fe("hypersensitivityepisode_2.ogg")];for(let s=0;s<a.length;s++){const t=a[s];try{const a=await fetch(t,{method:"HEAD"});a.ok?e.push(`âœ… ${t.split("/").pop()} å­˜åœ¨`):e.push(`âŒ ${t.split("/").pop()} ä¸å­˜åœ¨ (${a.status})`)}catch(o){e.push(`âŒ ${t.split("/").pop()} æ— æ³•è®¿é—®: ${o.message}`)}Ye.value=(s+1)/a.length*25}const t=await Ta();e.push(t.message),Ye.value=50;const i=await $a();e.push(...i),Ye.value=75;const n=Sa();e.push(...n),Ye.value=100,Je.value="éŸ³é¢‘è¯Šæ–­å®Œæˆï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°",Xe.value=!1,alert("éŸ³é¢‘è¯Šæ–­å®Œæˆ:\n"+e.join("\n")),setTimeout(()=>{Je.value="",Ye.value=0},5e3)},Ta=()=>new Promise(e=>{const a=Fe("ancient_meditation.ogg"),t=new Audio;let i=!1;const n=()=>{i||(i=!0,t.oncanplaythrough=null,t.onerror=null,t.onloadstart=null,t.onprogress=null,t.src="",clearTimeout(o))},o=setTimeout(()=>{n(),e({success:!1,message:"âš ï¸ éŸ³é¢‘åŠ è½½è¶…æ—¶"})},1e4);t.onloadstart=()=>{},t.onprogress=()=>{},t.oncanplaythrough=()=>{n(),t.play().then(()=>{setTimeout(()=>{t.pause(),t.currentTime=0,t.src=""},1e3),e({success:!0,message:"âœ… éŸ³é¢‘æ’­æ”¾æµ‹è¯•é€šè¿‡"})}).catch(a=>{e({success:!1,message:"âŒ éŸ³é¢‘æ’­æ”¾å¤±è´¥: "+a.message})})},t.onerror=a=>{n(),e({success:!1,message:"âŒ éŸ³é¢‘æ’­æ”¾æµ‹è¯•å¤±è´¥"})},t.preload="auto",t.src=a,t.load()}),$a=async()=>{const e=[],a=Fe("ancient_meditation.ogg");try{const t=await fetch(a);if(t.ok){const i=await t.arrayBuffer(),n=await(async(e,a)=>new Promise(t=>{if(!window.AudioContext)return void t({success:!1,message:`âš ï¸ ${a}: æµè§ˆå™¨ä¸æ”¯æŒ AudioContext`});const i=new(window.AudioContext||window.webkitAudioContext);i.decodeAudioData(e.slice(0)).then(e=>{i.close(),t({success:!0,message:`âœ… ${a}: è§£ç æˆåŠŸ (${e.duration.toFixed(2)}ç§’, ${e.sampleRate}Hz)`})}).catch(e=>{i.close(),t({success:!1,message:`âŒ ${a}: è§£ç å¤±è´¥ (${e.message})`})})}))(i,a.split("/").pop());e.push(n.message)}else e.push(`âŒ ${a.split("/").pop()}: æ— æ³•è·å–æ–‡ä»¶`)}catch(t){e.push(`âŒ ${a.split("/").pop()}: å¤„ç†å¤±è´¥ (${t.message})`)}return e},Sa=()=>{const e=[],a=document.createElement("audio");return[{type:"audio/mpeg",name:"MP3"},{type:'audio/ogg; codecs="vorbis"',name:"OGG Vorbis"},{type:'audio/ogg; codecs="opus"',name:"OGG Opus"},{type:'audio/mp4; codecs="mp4a.40.2"',name:"AAC (M4A)"},{type:"audio/wav",name:"WAV"},{type:'audio/webm; codecs="vorbis"',name:"WebM Vorbis"},{type:'audio/webm; codecs="opus"',name:"WebM Opus"}].forEach(t=>{const i=a.canPlayType(t.type),n="probably"===i?"âœ… å¾ˆå¯èƒ½æ”¯æŒ":"maybe"===i?"âš ï¸ å¯èƒ½æ”¯æŒ":"âŒ ä¸æ”¯æŒ";e.push(`${n} ${t.name}`)}),window.AudioContext||window.webkitAudioContext?e.push("âœ… æµè§ˆå™¨æ”¯æŒ AudioContext"):e.push("âŒ æµè§ˆå™¨ä¸æ”¯æŒ AudioContext"),e},Aa=e=>{if(!e||e.trim().length<2)return Le.value="æ‚¨çš„è¡¨è¾¾æ¯”è¾ƒç®€çŸ­ã€‚æœ‰æ—¶å€™å‹åŠ›ä¼šè®©æˆ‘ä»¬å˜å¾—æ²‰é»˜ï¼Œè¿™æ˜¯æ­£å¸¸çš„ã€‚è®©æˆ‘ä¸ºæ‚¨æ¨èä¸€äº›åŸºç¡€çš„æ”¾æ¾ç»ƒä¹ ã€‚",We.value=[{text:"ğŸ¤« ç®€çŸ­è¡¨è¾¾",class:"subtle"},{text:"ğŸ’­ åˆæ­¥æ¢ç´¢",class:"exploration"}],Ra(),void(De.value=!0);const a=e.toLowerCase();let t="stress",i="work";(a.includes("ç„¦è™‘")||a.includes("ç´§å¼ ")||a.includes("æ‹…å¿ƒ"))&&(t="anxiety"),(a.includes("ç´¯")||a.includes("ç–²æƒ«")||a.includes("ç–²åŠ³"))&&(t="fatigue"),(a.includes("éš¾è¿‡")||a.includes("ä¼¤å¿ƒ")||a.includes("æ‚²ä¼¤"))&&(t="sadness"),(a.includes("å·¥ä½œ")||a.includes("åŠ ç­")||a.includes("è€æ¿"))&&(i="work"),(a.includes("æœªæ¥")||a.includes("è¿·èŒ«")||a.includes("æ–¹å‘"))&&(i="future"),(a.includes("å…³ç³»")||a.includes("æœ‹å‹")||a.includes("å®¶äºº"))&&(i="relationship");const n={anxiety:{text:"ç„¦è™‘",desc:"å¯¹æœªæ¥çš„æ‹…å¿§å’Œä¸å®‰"},stress:{text:"å‹åŠ›",desc:"æ‰¿å—ç€è¾ƒå¤§çš„è´Ÿæ‹…"},fatigue:{text:"ç–²åŠ³",desc:"èº«å¿ƒä¿±ç–²çš„çŠ¶æ€"},sadness:{text:"æ‚²ä¼¤",desc:"å†…å¿ƒæ·±å¤„çš„ä¼¤æ„Ÿ"}},o=n[t]||n.stress,s={work:"å·¥ä½œå‹åŠ›",future:"æœªæ¥è§„åˆ’",relationship:"äººé™…å…³ç³»"}[i]||"å‹åŠ›";Le.value=`æˆ‘æ„Ÿå—åˆ°æ‚¨æœ‰äº›${o.text}ï¼Œ${o.desc}ã€‚è¿™ä¸»è¦ä¸${s}æœ‰å…³ã€‚æ„Ÿè°¢æ‚¨çš„ä¿¡ä»»åˆ†äº«ï¼Œè®©æˆ‘ä¸ºæ‚¨æ¨èæœ€é€‚åˆçš„å†¥æƒ³ç»ƒä¹ ã€‚`,We.value=[{text:`${o.text}`,class:t},{text:`ğŸ’¼ ${s}`,class:i}],Ra(a,t,i),De.value=!0},Ea=e=>{const a=e.includes("/")?e.split("/").pop():e;for(const[t,i]of Object.entries(ha))if(a.includes(t))return i;return"ğŸµ ä¸“ä¸šéŸ³é¢‘"},Fa=e=>{const a=e;return y.has(a)&&y.get(a).readyState>=3},Ra=(e,a="stress",t="work")=>{const i=[{id:"mindfulness",icon:"ğŸ§˜â€â™‚ï¸",title:"æ­£å¿µå‘¼å¸å†¥æƒ³",duration:"8",description:"ä¸“ä¸šå¼•å¯¼å›åˆ°å½“ä¸‹ï¼Œä¸å‘¼å¸è¿æ¥",type:"mindfulness",audioSource:"multi-track",audioFileName:"ancient_melody_preserved.ogg",color:"#4CAF50",cached:Fa("ancient_melody_preserved.ogg")},{id:"stressRelief",icon:"ğŸŒŠ",title:"å‹åŠ›é‡Šæ”¾å†¥æƒ³",duration:"10",description:"ä¸“ä¸šå¼•å¯¼é‡Šæ”¾èº«å¿ƒç´§å¼ ",type:"stressRelief",audioSource:"single-audio",audioFileName:"ancient_meditation.ogg",color:"#2196F3",cached:Fa("ancient_meditation.ogg")},{id:"deepRelaxation",icon:"ğŸ’¤",title:"æ·±åº¦æ”¾æ¾å†¥æƒ³",duration:"15",description:"ä¸“ä¸šå¼•å¯¼è¿›å…¥æ·±åº¦æ”¾æ¾",type:"deepRelaxation",audioSource:"single-audio",audioFileName:"sleep_wind_chimes.ogg",color:"#673AB7",cached:Fa("sleep_wind_chimes.ogg")},{id:"futureClarity",icon:"âœ¨",title:"æœªæ¥è§„åˆ’å†¥æƒ³",duration:"12",description:"ä¸“ä¸šå¼•å¯¼æ¾„æ¸…ç›®æ ‡",type:"futureClarity",audioSource:"single-audio",audioFileName:"pure_meditation_alpha_meditation.ogg",color:"#00BCD4",cached:Fa("pure_meditation_alpha_meditation.ogg")},{id:"workStress",icon:"ğŸ’¼",title:"å·¥ä½œå‡å‹å†¥æƒ³",duration:"8",description:"ä¸“é—¨é’ˆå¯¹å·¥ä½œå‹åŠ›è®¾è®¡",type:"workStress",audioSource:"single-audio",audioFileName:"focus_meditation.ogg",color:"#FF9800",cached:Fa("focus_meditation.ogg")},{id:"anxietyRelief",icon:"ğŸ¯",title:"ç„¦è™‘ç¼“è§£å†¥æƒ³",duration:"10",description:"ä¸“ä¸šå¼•å¯¼å®‰æŠšç„¦è™‘æƒ…ç»ª",type:"anxietyRelief",audioSource:"single-audio",audioFileName:"mianxiaoturelax_state_meditation.ogg",color:"#E91E63",cached:Fa("mianxiaoturelax_state_meditation.ogg")},{id:"alphaWaves",icon:"ğŸ§ ",title:"Alphaè„‘æ³¢å†¥æƒ³",duration:"12",description:"Alphaè„‘æ³¢æ·±åº¦æ”¾æ¾",type:"alphaWaves",audioSource:"single-audio",audioFileName:"alpha_wavemp3.ogg",color:"#9C27B0",cached:Fa("alpha_wavemp3.ogg")},{id:"desensitization",icon:"ğŸ›¡ï¸",title:"é«˜æ•è€…è„±æ•è®­ç»ƒ",duration:"15",description:"é’ˆå¯¹é«˜æ•æ„Ÿäººç¾¤è®¾è®¡",type:"desensitization",audioSource:"single-audio",audioFileName:"hypersensitivityepisode_2.ogg",color:"#607D8B",cached:Fa("hypersensitivityepisode_2.ogg")}],n={anxiety:["anxietyRelief","mindfulness","stressRelief","alphaWaves"],fatigue:["deepRelaxation","stressRelief","mindfulness"],sadness:["mindfulness","deepRelaxation","stressRelief"],stress:["stressRelief","mindfulness","workStress","deepRelaxation"]}[a]||["stressRelief","mindfulness"];"work"===t?n.unshift("workStress"):"future"===t&&n.unshift("futureClarity");const o=[...new Set(n)];Ve.value=o.slice(0,4).map(e=>{const a=i.find(a=>a.id===e);return a?{...a,audioTypeTag:Ea(a.audioFileName),audioSourceText:"multi-track"===a.audioSource?"ğŸ§ å¤šè½¨æ··åˆ":"ğŸµ å•ä¸ªéŸ³é¢‘"}:null}).filter(Boolean)},Ma={localAudioFiles:{mindfulness:"ancient_melody_preserved.ogg",stressRelief:"ancient_meditation.ogg",deepRelaxation:"sleep_wind_chimes.ogg",futureClarity:"pure_meditation_alpha_meditation.ogg",workStress:"focus_meditation.ogg",anxietyRelief:"mianxiaoturelax_state_meditation.ogg",alphaWaves:"alpha_wavemp3.ogg",desensitization:"hypersensitivityepisode_2.ogg","nature-rain":"nature_sounds_city_rain.ogg","nature-fireplace":"nature_sounds_fireplace_reflection.ogg","nature-spring":"nature_sounds_spring_song.ogg","nature-ocean":"nature_sounds_sea_breeze.ogg","nature-thunder":"nature_sounds_thunder_night.ogg","sleep-master":"sleep_music_master_talk.ogg","sleep-air":"sleep_music_fresh_air.ogg","alpha-bell":"pure_meditation_alpha_bell_meditation.ogg","theta-meditation":"pure_meditation_theta_meditation.ogg","theta-bell":"pure_meditation_theta_bell_meditation.ogg",ocean:"nature_sounds_sea_breeze.ogg",singingBowl:"singing_bowl_ocean.ogg",wind:"nature_sounds_spring_song.ogg",rain:"nature_sounds_city_rain.ogg",forest:"nature_sounds_fireplace_reflection.ogg",stream:"nature_sounds_thunder_night.ogg",birds:"pure_meditation_theta_bell_meditation.ogg","breath-in":"breath_in.ogg","breath-out":"breath_out.ogg",bell:"bell.ogg",alphabell:"alphabell.ogg",alphabellstandard:"alphabellstandard.ogg",alphameditation:"alphameditation.ogg",alphawave:"alphawave.ogg",meditation_music:"meditation_music.ogg",releavestate:"releavestate.ogg",ancient_melody_preserved:"ancient_melody_preserved.ogg",ancient_melody_like_a_star:"ancient_melody_like_a_star.ogg",ancient_meditation:"ancient_meditation.ogg",focus_meditation:"focus_meditation.ogg",focus_meditation_standard:"focus_meditation_standard.ogg",hypersensitivityepisode_2:"hypersensitivityepisode_2.ogg",hypersensitivityepisode_3:"hypersensitivityepisode_3.ogg",mianxiaoturelax_state_meditation:"mianxiaoturelax_state_meditation.ogg",mianxiaotutravel_meditation:"mianxiaotutravel_meditation.ogg",nature_sounds_city_rain:"nature_sounds_city_rain.ogg",nature_sounds_fireplace_reflection:"nature_sounds_fireplace_reflection.ogg",nature_sounds_sea_breeze:"nature_sounds_sea_breeze.ogg",nature_sounds_spring_song:"nature_sounds_spring_song.ogg",nature_sounds_thunder_night:"nature_sounds_thunder_night.ogg",pure_meditation_alpha_bell_meditation:"pure_meditation_alpha_bell_meditation.ogg",pure_meditation_alpha_meditation:"pure_meditation_alpha_meditation.ogg",pure_meditation_theta_bell_meditation:"pure_meditation_theta_bell_meditation.ogg",pure_meditation_theta_meditation:"pure_meditation_theta_meditation.ogg",singing_bowl_earth:"singing_bowl_earth.ogg",singing_bowl_forest:"singing_bowl_forest.ogg",singing_bowl_light:"singing_bowl_light.ogg",singing_bowl_ocean:"singing_bowl_ocean.ogg",singing_bowl_spring_water:"singing_bowl_spring_water.ogg",singing_bowl_starry_sky:"singing_bowl_starry_sky.ogg",singing_bowl_universe:"singing_bowl_universe.ogg",sleep_music_fresh_air:"sleep_music_fresh_air.ogg",sleep_music_master_talk:"sleep_music_master_talk.ogg",sleep_wind_chimes:"sleep_wind_chimes.ogg"},meditationPresets:{mindfulness:{title:"æ­£å¿µå‘¼å¸å†¥æƒ³",description:"æµ·æ´‹å¾®é£ï¼Œå¼•å¯¼ä¸“æ³¨å‘¼å¸",sounds:[{name:"ocean",volume:.4,type:"background"},{name:"wind",volume:.2,type:"background"},{name:"singingBowl",volume:.3,type:"effect",interval:30}],duration:480,fallbackAudio:"ancient_melody_preserved.ogg"},stressRelief:{title:"å‹åŠ›é‡Šæ”¾å†¥æƒ³",description:"ä¸“ä¸šå¼•å¯¼é‡Šæ”¾èº«å¿ƒç´§å¼ ",sounds:[{name:"nature-rain",volume:.3,type:"background"},{name:"singingBowl",volume:.4,type:"effect",interval:45}],duration:600,fallbackAudio:"ancient_meditation.ogg"},deepRelaxation:{title:"æ·±åº¦æ”¾æ¾å†¥æƒ³",description:"ä¸“ä¸šå¼•å¯¼è¿›å…¥æ·±åº¦æ”¾æ¾",sounds:[{name:"nature-ocean",volume:.5,type:"background"},{name:"wind",volume:.2,type:"background"}],duration:900,fallbackAudio:"sleep_wind_chimes.ogg"}},soundColors:{ocean:"#2196F3",forest:"#4CAF50",rain:"#607D8B",stream:"#00BCD4",wind:"#9E9E9E",singingBowl:"#FF9800",birds:"#8BC34A","nature-ocean":"#2196F3","nature-rain":"#607D8B","nature-wind":"#9E9E9E","nature-thunder":"#673AB7","nature-spring":"#4CAF50","nature-fireplace":"#FF5722"},soundIcons:{ocean:"ğŸŒŠ",forest:"ğŸŒ²",rain:"ğŸŒ§ï¸",stream:"ğŸ’§",wind:"ğŸƒ",singingBowl:"ğŸ¥£",birds:"ğŸ¦","nature-ocean":"ğŸŒŠ","nature-rain":"ğŸŒ§ï¸","nature-wind":"ğŸƒ","nature-thunder":"âš¡","nature-spring":"ğŸŒ¸","nature-fireplace":"ğŸ”¥"}},Pa=async e=>{Oa();const a=Ve.value.find(a=>a.type===e);if(!a)return Je.value="âš ï¸ æœªæ‰¾åˆ°å†¥æƒ³é…ç½®",void(Ke.value="error");Ze.value={title:a.title,description:a.description,audioSource:"multi-track"===a.audioSource?"multi-track":"single-audio"},aa.value=a.audioSource,Je.value=`ğŸµ å¼€å§‹${a.title}...`,Ke.value="success",Xe.value=!0,ea.value=`æ­£åœ¨åŠ è½½${"multi-track"===a.audioSource?"å¤šè½¨":"å•è½¨"}éŸ³é¢‘...`;try{if("multi-track"===a.audioSource)try{await za(e),ea.value=`${a.title} å·²å¼€å§‹ï¼ˆå¤šè½¨æ¨¡å¼ï¼‰`}catch(t){if(!a.audioFileName)throw new Error("æ²¡æœ‰å¯ç”¨çš„å¤‡ç”¨éŸ³é¢‘");{const e=Fe(a.audioFileName);ea.value="å¤šè½¨éŸ³é¢‘åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨å•è½¨éŸ³é¢‘...",aa.value="single-audio",Ze.value.audioSource="single-audio",await Na(e,a.duration),ea.value=`${a.title} å·²å¼€å§‹ï¼ˆå•è½¨æ¨¡å¼ï¼‰`}}else{if(!a.audioFileName)throw new Error("éŸ³é¢‘æ–‡ä»¶åä¸ºç©º");const e=Fe(a.audioFileName);await Na(e,a.duration),ea.value=`${a.title} å·²å¼€å§‹`}Oe.value=!0,Ge.value=!0,Ue.value=60*parseInt(a.duration),qa(),setTimeout(()=>{Je.value="",Xe.value=!1},2e3)}catch(i){Je.value=`âš ï¸ ${a.title} åŠ è½½å¤±è´¥`,Ke.value="error",ea.value=`éŸ³é¢‘åŠ è½½å¤±è´¥: ${i.message}`,Xe.value=!1,Oa()}},za=async e=>{const a=Ma.meditationPresets[e];if(!a)throw new Error(`æœªæ‰¾åˆ°å¤šè½¨éŸ³é¢‘é…ç½®: ${e}`);try{const t=a.sounds.map(async(e,a)=>{try{return await Ba(e,a)}catch(t){return null}}),i=await Promise.allSettled(t);if(0===i.filter(e=>"fulfilled"===e.status&&e.value).length)throw new Error("æ‰€æœ‰éŸ³é¢‘è½¨é“åŠ è½½å¤±è´¥");return Wa(e),!0}catch(t){throw t}},Ba=async(e,a=0)=>{const{name:t,volume:i=.5,type:n="background",interval:o}=e,s=Ma.localAudioFiles[t];if(!s)throw new Error(`æœªæ‰¾åˆ°æœ¬åœ°éŸ³é¢‘: ${t}`);const l=Fe(s);return new Promise((e,s)=>{const r=new Audio,u=setTimeout(()=>{s(new Error(`éŸ³é¢‘åŠ è½½è¶…æ—¶: ${t}`))},8e3);r.addEventListener("canplaythrough",()=>{clearTimeout(u),r.volume=i,r.loop="background"===n;const c={audio:r,name:t,volume:i,stop:()=>{r.pause(),r.currentTime=0},setVolume:e=>{r.volume=e}};if(sa.value.push(c),setTimeout(()=>{Oe.value&&Ge.value&&r.play().catch(e=>{s(e)})},1e3*a),"effect"===n&&o){const e=setInterval(()=>{if(Oe.value&&Ge.value){const e=new Audio(l);e.volume=.7*i,e.play(),e.onended=()=>{e.remove()},la.push(e)}else clearInterval(e)},1e3*o);c.intervalId=e}e(c)}),r.addEventListener("error",e=>{clearTimeout(u),s(new Error(`éŸ³é¢‘ ${t} åŠ è½½å¤±è´¥`))}),r.preload="auto",r.src=l,r.load()})},Ia=async()=>{Je.value="ğŸ§ æ­£åœ¨æµ‹è¯•å¤šè½¨éŸ³é¢‘...",Ke.value="listening",Xe.value=!0;try{Oa();const e=Ma.meditationPresets.mindfulness;if(!e)throw new Error("æœªæ‰¾åˆ°å¤šè½¨éŸ³é¢‘é…ç½®");for(const a of e.sounds){Ma.localAudioFiles[a.name]}await za("mindfulness"),setTimeout(()=>{Oa(),Je.value="âœ… å¤šè½¨éŸ³é¢‘æµ‹è¯•æˆåŠŸ",Xe.value=!1,ea.value="å¤šè½¨éŸ³é¢‘åŠŸèƒ½æ­£å¸¸ï¼Œå¯ä»¥åŒæ—¶æ’­æ”¾å¤šä¸ªå£°éŸ³",setTimeout(()=>{Je.value="",ea.value=""},3e3)},3e3)}catch(e){Je.value="âŒ å¤šè½¨éŸ³é¢‘æµ‹è¯•å¤±è´¥",Xe.value=!1,ea.value=`æµ‹è¯•å¤±è´¥: ${e.message}`,setTimeout(()=>{Je.value="",ea.value=""},3e3)}},Na=async(e,a)=>{const t=e.split("/").pop();return new Promise((i,n)=>{if(y.has(t)){const o=y.get(t);if(o.readyState>=3){const t=o.cloneNode();return void La(t,e,a,i,n)}}const o=new Audio;la.push(o);Date.now();let s=!1,l=!1;const r=setTimeout(()=>{s||l||(u(),n(new Error("éŸ³é¢‘åŠ è½½è¶…æ—¶ (10ç§’)")))},1e4),u=()=>{o.oncanplaythrough=null,o.onerror=null,o.onloadeddata=null,o.onstalled=null,o.onsuspend=null,o.onloadstart=null,o.onprogress=null,clearTimeout(r)},c=()=>{s||l||(s=!0,u(),y.set(t,o),La(o.cloneNode(),e,a,i,n))};o.oncanplaythrough=c,o.onloadeddata=c,o.onerror=e=>{var a;s||l||(l=!0,u(),n(new Error(`åŠ è½½å¤±è´¥: ${(null==(a=o.error)?void 0:a.message)||"æœªçŸ¥é”™è¯¯"}`)))},o.onloadstart=()=>{},o.onprogress=()=>{},o.onstalled=()=>{},o.onsuspend=()=>{},o.preload="auto",o.src=e,o.volume=ta.value,o.load(),o.readyState>=3&&setTimeout(c,100)})},La=(e,a,t,i,n)=>{e.volume=ta.value;const o=e.play();if(void 0!==o)o.then(()=>{const a={audio:e,name:"main",volume:ta.value,stop:()=>{e.pause(),e.currentTime=0},setVolume:a=>{e.volume=a,ta.value=a}};sa.value=[a],e.onended=()=>{Oe.value&&Ga()},i(a)}).catch(e=>{n(new Error(`æ’­æ”¾å¤±è´¥: ${e.message}`))});else{const a={audio:e,name:"main",volume:ta.value,stop:()=>{e.pause(),e.currentTime=0},setVolume:a=>{e.volume=a,ta.value=a}};sa.value=[a],e.onended=()=>{Oe.value&&Ga()},i(a)}},Wa=e=>{const a=Ma.meditationPresets[e];a&&(na.value=a.sounds.map(e=>{const a=Ma.soundColors[e.name]||"#4fc3f7",t=Ma.soundIcons[e.name]||"ğŸµ";return{name:Da(e.name),icon:t,volume:e.volume,color:a,soundName:e.name,background:`linear-gradient(to right, ${a} 0%, ${a} ${100*e.volume}%, rgba(255,255,255,0.1) ${100*e.volume}%, rgba(255,255,255,0.1) 100%)`}}))},Da=e=>({ocean:"æµ·æ´‹",forest:"æ£®æ—",rain:"ç»†é›¨",stream:"æºªæµ",wind:"å¾®é£",singingBowl:"é¢‚é’µ",birds:"é¸Ÿé¸£","nature-ocean":"æµ·æ´‹","nature-rain":"é›¨å£°","nature-wind":"é£å£°","nature-thunder":"é›·å£°","nature-spring":"æ˜¥ä¹‹å£°","nature-fireplace":"å£ç‚‰"}[e]||e),Va=()=>{Oa(),Je.value="ğŸ”§ å¼ºåˆ¶æ¸…ç†å®Œæˆ",setTimeout(()=>{Je.value=""},2e3)},Oa=()=>{if(document.querySelectorAll("audio").forEach(e=>{try{e.pause(),e.currentTime=0,e.src="",e.load()}catch(a){}}),sa.value.forEach(e=>{if(e.stop&&"function"==typeof e.stop)try{e.stop()}catch(a){}if(e.intervalId&&clearInterval(e.intervalId),e.audio&&"function"==typeof e.audio.pause)try{e.audio.pause(),e.audio.currentTime=0,e.audio.src="",e.audio.load()}catch(a){}}),la.forEach(e=>{try{e.pause(),e.currentTime=0,e.src=""}catch(a){}}),oa.value&&"function"==typeof oa.value.close)try{oa.value.close()}catch(e){}ra&&(clearInterval(ra),ra=null),sa.value=[],na.value=[],la=[],aa.value="",Oe.value=!1,Ge.value=!1,He.value=0,Xe.value=!1},Ha=async()=>{const e=Ie.value||"é»˜è®¤å‹åŠ›æ”¾æ¾";if(""===e.trim())return Je.value="è¯·è¾“å…¥æ‚¨çš„å‹åŠ›æè¿°",Ke.value="error",void setTimeout(()=>{Je.value=""},2e3);Ne.value=e,Aa(e)},Ua=async e=>{if(!ze.value&&!e.cached)return ea.value="âš ï¸ å½“å‰å¤„äºç¦»çº¿çŠ¶æ€ï¼Œæ­¤éŸ³é¢‘æœªç¼“å­˜ï¼Œæ— æ³•æ’­æ”¾",void setTimeout(()=>ea.value="",3e3);if(Oe.value){ea.value=`å·²æœ‰æ­£åœ¨è¿›è¡Œçš„å†¥æƒ³ï¼Œç‚¹å‡»"ç¡®å®š"å°†åœæ­¢å½“å‰å†¥æƒ³å¹¶å¼€å§‹${e.title}`;if(!(await new Promise(a=>{Je.value=`ç¡®è®¤åœæ­¢å½“å‰å†¥æƒ³å¹¶å¼€å§‹${e.title}ï¼Ÿ`,Ke.value="listening",setTimeout(()=>{confirm(`ç¡®è®¤åœæ­¢å½“å‰å†¥æƒ³å¹¶å¼€å§‹${e.title}å—ï¼Ÿ`)?(a(!0),ea.value=""):(a(!1),ea.value="")},100)})))return Je.value="å·²å–æ¶ˆ",void setTimeout(()=>{Je.value=""},1500);Qa(),await new Promise(e=>setTimeout(e,500))}Xe.value=!0,(()=>{try{return oa.value||(oa.value=new(window.AudioContext||window.webkitAudioContext)),!0}catch(e){return!1}})(),ja(e.type),await Pa(e.type),Je.value=`ğŸ§˜â€â™€ï¸ å¼€å§‹${e.title}...`,Ke.value="starting",setTimeout(()=>{Je.value="",Xe.value=!1},2e3)},ja=e=>{je.value={mindfulness:"#4CAF50",stressRelief:"#2196F3",deepRelaxation:"#673AB7",futureClarity:"#00BCD4",workStress:"#FF9800",anxietyRelief:"#E91E63",alphaWaves:"#9C27B0",desensitization:"#607D8B"}[e]||"#4fc3f7",ca&&ca.fog&&ca.fog.color.setHex(parseInt(je.value.replace("#","0x")))},qa=()=>{ra&&(clearInterval(ra),ra=null),He.value=0,ra=setInterval(()=>Ge.value&&Oe.value?(qe.value=1===qe.value?1.5:1,He.value>=Ue.value?(clearInterval(ra),ra=null,void Ga()):void He.value++):(clearInterval(ra),void(ra=null)),1e3)},Ga=()=>{if(Ge.value=!1,Je.value="ğŸ‰ å†¥æƒ³å®Œæˆï¼æ„Ÿè§‰å¥½äº›äº†å—ï¼Ÿ",Ke.value="complete",Oa(),"speechSynthesis"in window){const e=new SpeechSynthesisUtterance("å†¥æƒ³ç»ƒä¹ å·²å®Œæˆï¼Œè¯·æ…¢æ…¢çå¼€çœ¼ç›");e.lang="zh-CN",e.rate=.9,speechSynthesis.speak(e)}setTimeout(()=>{Je.value=""},3e3)},Ja=()=>{Ge.value=!Ge.value,sa.value.forEach(e=>{e.audio&&(Ge.value?e.audio.play():e.audio.pause())}),Ge.value?Je.value="â–¶ï¸ ç»§ç»­æ’­æ”¾":Je.value="â¸ï¸ å·²æš‚åœ",setTimeout(()=>{Je.value=""},1500)},Ka=()=>{He.value=0,Ge.value=!0,sa.value.forEach(e=>{e.audio&&(e.audio.currentTime=0,e.audio.play())}),Je.value="ğŸ”„ é‡æ–°å¼€å§‹",setTimeout(()=>{Je.value=""},1500)},Qa=()=>{Ge.value=!1,Oe.value=!1,He.value=0,Oa(),Je.value="â¹ï¸ å†¥æƒ³å·²åœæ­¢",setTimeout(()=>{Je.value=""},1500)},Xa=e=>{const a=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`},Ya=()=>{const e=new C,a=5e3,t=new Float32Array(15e3),i=new Float32Array(15e3),n=new Float32Array(a);for(let s=0;s<15e3;s+=3){t[s]=50*(Math.random()-.5),t[s+1]=50*(Math.random()-.5),t[s+2]=50*(Math.random()-.5);const e=.3*Math.random()+.6;i[s]=e,i[s+1]=.8,i[s+2]=1,n[s/3]=.5*Math.random()+.1}e.setAttribute("position",new T(t,3)),e.setAttribute("color",new T(i,3)),e.setAttribute("size",new T(n,1));const o=new $({uniforms:{time:{value:0},breath:{value:1}},vertexShader:"\n      uniform float time;\n      uniform float breath;\n      attribute float size;\n      attribute vec3 color;\n      varying vec3 vColor;\n      \n      void main() {\n        vColor = color;\n        vec3 pos = position;\n        float noise = sin(time * 0.5 + position.x * 0.1) * \n                     cos(time * 0.3 + position.y * 0.1) * 0.5;\n        \n        pos.x += noise * breath;\n        pos.y += cos(time * 0.7 + position.z * 0.1) * 0.3 * breath;\n        pos.z += sin(time * 0.4 + position.x * 0.2) * 0.2;\n        \n        vec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);\n        gl_PointSize = size * (10.0 / -mvPosition.z) * (0.5 + breath * 0.5);\n        gl_Position = projectionMatrix * mvPosition;\n      }\n    ",fragmentShader:"\n      varying vec3 vColor;\n      \n      void main() {\n        float distance = length(gl_PointCoord - vec2(0.5));\n        if (distance > 0.5) discard;\n        float strength = 1.0 - distance * 2.0;\n        strength = pow(strength, 3.0);\n        gl_FragColor = vec4(vColor, strength * 0.8);\n      }\n    ",transparent:!0,blending:S,depthWrite:!1});ma=new A(e,o),ca.add(ma)},Za=()=>{const e=new E(3,32,32),a=new F({color:je.value,transparent:!0,opacity:.3}),t=new R(e,a);ca.add(t),new M.Tween(t.scale).to({x:1.2,y:1.2,z:1.2},4e3).easing(M.Easing.Sinusoidal.InOut).yoyo(!0).repeat(1/0).start()},et=()=>{ca&&da&&va&&(ga=requestAnimationFrame(et),M.getAll().length>0&&M.update(),ma&&Oe.value&&(ma.material.uniforms.time.value+=.01,ma.material.uniforms.breath.value=qe.value,ma.rotation.y+=.001*qe.value,ma.rotation.x+=5e-4),va.render(ca,da))},at=()=>{ua.value&&da&&va&&(da.aspect=ua.value.clientWidth/ua.value.clientHeight,da.updateProjectionMatrix(),va.setSize(ua.value.clientWidth,ua.value.clientHeight))};return a(()=>{(()=>{if("undefined"!=typeof PerformanceObserver){const e=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{e.duration>100&&e.duration>500&&(Pe.value=`æ£€æµ‹åˆ°é•¿ä»»åŠ¡ (${Math.round(e.duration)}ms)ï¼Œå¯èƒ½ä¼šå½±å“ä½“éªŒ`,setTimeout(()=>Pe.value="",5e3))})});try{e.observe({entryTypes:["longtask"]})}catch(i){}}"memory"in performance&&setInterval(()=>{try{const{usedJSHeapSize:e,totalJSHeapSize:a}=performance.memory;Me.value=Math.round(e/a*100),Me.value>85?Pe.value=`å†…å­˜ä½¿ç”¨è¾ƒé«˜ (${Me.value}%)ï¼Œå»ºè®®é‡å¯åº”ç”¨`:Me.value}catch(i){}},3e4);let e=0,a=performance.now();const t=()=>{e++;const i=performance.now();if(i-a>=1e3){const t=Math.round(1e3*e/(i-a));t<30&&t<20&&(Pe.value=`ä½å¸§ç‡ (${t}FPS)ï¼Œå¯èƒ½ä¼šå½±å“ä½“éªŒ`),e=0,a=i}requestAnimationFrame(t)};requestAnimationFrame(t)})(),ya(),window.addEventListener("online",ya),window.addEventListener("offline",ya),setTimeout(()=>{(()=>{if(ua.value)try{ca=new w,ca.fog=new b(657946,10,50),da=new k(75,ua.value.clientWidth/ua.value.clientHeight,.1,1e3),da.position.z=15,va=new x({canvas:ua.value,antialias:!0,alpha:!0}),va.setSize(ua.value.clientWidth,ua.value.clientHeight),va.setPixelRatio(Math.min(window.devicePixelRatio,2)),va.setClearColor(657946,1),Ya(),Za(),et(),ia.value=!0}catch(e){ia.value=!1}})()},100),window.addEventListener("audioerror",e=>{}),wa(),["ancient_melody_preserved.ogg","ancient_meditation.ogg","sleep_wind_chimes.ogg","pure_meditation_alpha_meditation.ogg","focus_meditation.ogg","mianxiaoturelax_state_meditation.ogg","alpha_wavemp3.ogg","hypersensitivityepisode_2.ogg"].forEach(e=>{const a=new Audio;a.preload="metadata",a.src=Fe(e),a.onloadeddata=()=>{y.set(e,a)},a.onerror=()=>{}}),window.addEventListener("resize",at),Je.value="ç‚¹å‡»éº¦å…‹é£è¯´å‡ºä½ çš„å‹åŠ›ï¼Œæˆ–è¾“å…¥æ–‡å­—æè¿°",Ke.value="listening",setTimeout(()=>{Je.value=""},3e3)}),t(()=>{window.removeEventListener("resize",at),window.removeEventListener("online",ya),window.removeEventListener("offline",ya),Va(),ca&&(ca.traverse(e=>{e.geometry&&e.geometry.dispose(),e.material&&(e.material.map&&e.material.map.dispose(),e.material.lightMap&&e.material.lightMap.dispose(),e.material.bumpMap&&e.material.bumpMap.dispose(),e.material.dispose())}),ca.clear(),ca=null),va&&(va.dispose(),va.forceContextLoss&&va.forceContextLoss(),va=null),da=null,ma=null,ga&&(cancelAnimationFrame(ga),ga=null),y.clear(),la=[]}),i(Be,e=>{ma&&(ma.material.uniforms.breath.value=e?1.5:1)}),(e,a)=>{var t,i;return n(),o("div",z,[Re.value?(n(),o("div",B," Canvas: "+s(null==(t=ua.value)?void 0:t.clientWidth)+"x"+s(null==(i=ua.value)?void 0:i.clientHeight)+" | THREE: "+s(ia.value?"âœ“":"âœ—")+" | Memory: "+s(Me.value?`${Me.value}%`:"N/A"),1)):l("",!0),Xe.value?(n(),o("div",I,[a[7]||(a[7]=r("div",{class:"loading-spinner"},null,-1)),a[8]||(a[8]=r("div",{class:"loading-text"},"æ­£åœ¨åŠ è½½ä¸“ä¸šå†¥æƒ³éŸ³é¢‘...",-1)),Ye.value>0?(n(),o("div",N,[r("div",{class:"progress-bar",style:u({width:Ye.value+"%"})},null,4),r("div",L,s(Math.round(Ye.value))+"%",1)])):l("",!0)])):l("",!0),r("div",W,[r("div",{class:"voice-input",onClick:ba},[r("div",{class:c(["pulse-ring",{recording:Be.value}])},null,2),r("div",D,s(Be.value?"ğŸ”´":"ğŸ¤"),1),r("span",null,s(Be.value?"æ­£åœ¨è†å¬...ç‚¹å‡»åœæ­¢":"ç‚¹å‡»è¯´å‡ºä½ çš„å‹åŠ›"),1),r("div",{class:c(["voice-wave",{active:Be.value}])},[...a[9]||(a[9]=[d('<div class="wave-bar" data-v-95dcb93b></div><div class="wave-bar" data-v-95dcb93b></div><div class="wave-bar" data-v-95dcb93b></div><div class="wave-bar" data-v-95dcb93b></div><div class="wave-bar" data-v-95dcb93b></div>',5)])],2)]),r("div",V,[v(r("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>Ie.value=e),placeholder:"æˆ–ç›´æ¥è¾“å…¥å‹åŠ›æè¿°...",onKeyup:g(Ha,["enter"])},null,544),[[m,Ie.value]]),r("button",{onClick:Ha},"åˆ†æå‹åŠ›")]),ze.value?l("",!0):(n(),o("div",O," âš ï¸ æ‚¨å¤„äºç¦»çº¿çŠ¶æ€ï¼Œä»…èƒ½ä½¿ç”¨å·²ç¼“å­˜çš„éŸ³é¢‘ ")),Re.value?(n(),o("div",H,[r("button",{onClick:a[1]||(a[1]=e=>xa("å·¥ä½œå‹åŠ›å¤§ï¼Œå¤©å¤©åŠ ç­")),class:"test-btn"},"æµ‹è¯•å·¥ä½œå‹åŠ›"),r("button",{onClick:a[2]||(a[2]=e=>xa("ç„¦è™‘å¤±çœ ç¡ä¸ç€")),class:"test-btn"},"æµ‹è¯•ç„¦è™‘"),r("button",{onClick:a[3]||(a[3]=e=>(async e=>{Je.value="ğŸ”Š æ­£åœ¨æµ‹è¯•éŸ³é¢‘...",Ke.value="success",await Pa(e),setTimeout(()=>{Je.value=""},2e3)})("mindfulness")),class:"test-btn"},"æµ‹è¯•éŸ³é¢‘"),r("button",{onClick:Ia,class:"test-btn"},"æµ‹è¯•å¤šè½¨éŸ³é¢‘"),r("button",{onClick:Ca,class:"test-btn"},"éŸ³é¢‘è¯Šæ–­"),r("button",{onClick:Va,class:"test-btn danger-btn"},"å¼ºåˆ¶æ¸…ç†éŸ³é¢‘"),r("button",{onClick:fa,class:"test-btn"},"æ€§èƒ½æ£€æµ‹")])):l("",!0),Ne.value?(n(),o("div",U,[a[10]||(a[10]=r("div",{class:"transcript-header"},"ğŸ—£ï¸ ä½ è¯´çš„æ˜¯ï¼š",-1)),r("div",j,s(Ne.value),1),r("div",q,s((new Date).toLocaleTimeString()),1)])):l("",!0),Le.value?(n(),o("div",G,[a[11]||(a[11]=r("div",{class:"analysis-header"},"ğŸ§  æ™ºèƒ½åˆ†æï¼š",-1)),r("div",J,s(Le.value),1),r("div",K,[(n(!0),o(p,null,_(We.value,e=>(n(),o("span",{key:e,class:c(["emotion-tag",e.class])},s(e.text),3))),128))])])):l("",!0),De.value?(n(),o("div",Q,[a[12]||(a[12]=r("div",{class:"suggestions-header"},"ğŸ’¡ ä¸ºæ‚¨æ¨èï¼š",-1)),r("div",X,[(n(!0),o(p,null,_(Ve.value,(e,a)=>(n(),o("div",{key:a,class:"suggestion-card",onClick:a=>Ua(e)},[r("div",Z,s(e.icon),1),r("div",ee,s(e.title),1),r("div",ae,s(e.duration)+"åˆ†é’Ÿ",1),r("div",te,s(e.description),1),r("div",ie,s(e.audioTypeTag),1),ze.value||e.cached?l("",!0):(n(),o("div",ne," âš ï¸ éœ€è¦ç½‘ç»œ "))],8,Y))),128))])])):l("",!0)]),r("canvas",{ref_key:"canvas",ref:ua,class:"visualization-field"},null,512),Oe.value?(n(),o("div",oe,[r("div",se,s(Xa(He.value))+" / "+s(Xa(Ue.value)),1),r("div",le,[a[13]||(a[13]=h(" è·Ÿç€ ",-1)),r("span",{class:"breath-dot",style:u({transform:`scale(${qe.value})`,backgroundColor:je.value})},null,4),a[14]||(a[14]=h(" çš„èŠ‚å¥å‘¼å¸ ",-1))]),Ze.value?(n(),o("div",re,[r("div",ue,s(Ze.value.title),1),r("div",ce,s(Ze.value.description),1),Ze.value.audioSource?(n(),o("div",de,s("local"===Ze.value.audioSource?"ğŸµ æœ¬åœ°éŸ³é¢‘":"ğŸŒ åœ¨çº¿éŸ³é¢‘"),1)):l("",!0)])):l("",!0),na.value.length>0&&"multi-track"===aa.value?(n(),o("div",ve,[a[15]||(a[15]=r("div",{class:"mixer-header"},"ğŸšï¸ å£°éŸ³è°ƒèŠ‚",-1)),r("div",me,[(n(!0),o(p,null,_(na.value,e=>(n(),o("div",{class:"mixer-track",key:e.name},[r("div",ge,[r("span",pe,s(e.icon),1),r("span",_e,s(e.name),1)]),r("input",{type:"range",min:"0",max:"100",value:100*e.volume,onInput:a=>((e,a)=>{const t=na.value.findIndex(a=>a.name===e);if(-1!==t){na.value[t].volume=a;const e=na.value[t].color;na.value[t].background=`linear-gradient(to right, ${e} 0%, ${e} ${100*a}%, rgba(255,255,255,0.1) ${100*a}%, rgba(255,255,255,0.1) 100%)`;const i=na.value[t].soundName;sa.value.forEach(e=>{e.name===i&&e.setVolume&&e.setVolume(a)})}})(e.name,a.target.value/100),class:"volume-slider"},null,40,he),r("span",fe,s(Math.round(100*e.volume))+"%",1)]))),128))])])):l("",!0),"single-audio"===aa.value?(n(),o("div",ye,[a[16]||(a[16]=r("div",{class:"volume-header"},"ğŸ”Š éŸ³é‡æ§åˆ¶",-1)),r("div",we,[r("input",{type:"range",min:"0",max:"100",value:100*ta.value,onInput:a[4]||(a[4]=e=>{return a=e.target.value/100,ta.value=a,void sa.value.forEach(e=>{e.setVolume&&e.setVolume(a)});var a}),class:"volume-slider-single"},null,40,be),r("span",ke,s(Math.round(100*ta.value))+"%",1)])])):l("",!0),r("div",xe,[r("button",{class:"player-btn",onClick:Ja},s(Ge.value?"â¸ï¸":"â–¶ï¸"),1),r("button",{class:"player-btn",onClick:Ka},"ğŸ”„"),r("button",{class:"player-btn",onClick:Qa},"â¹ï¸")])])):l("",!0),ea.value?(n(),o("div",Ce,[r("div",Te,[a[17]||(a[17]=r("div",{class:"tips-icon"},"ğŸ’¡",-1)),r("div",$e,s(ea.value),1),r("button",{class:"tips-close",onClick:a[5]||(a[5]=e=>ea.value="")},"Ã—")])])):l("",!0),Je.value?(n(),o("div",{key:4,class:c(["voice-status",Ke.value])},s(Je.value),3)):l("",!0),Qe.value?(n(),o("div",Se,[r("div",Ae,[a[18]||(a[18]=r("div",{class:"permission-icon"},"ğŸ¤",-1)),a[19]||(a[19]=r("div",{class:"permission-text"},"éœ€è¦éº¦å…‹é£æƒé™æ¥è¯†åˆ«æ‚¨çš„è¯­éŸ³",-1)),r("button",{class:"permission-btn",onClick:ka},"å…è®¸éº¦å…‹é£"),r("button",{class:"permission-btn cancel",onClick:a[6]||(a[6]=e=>Qe.value=!1)},"å–æ¶ˆ")])])):l("",!0),Pe.value?(n(),o("div",Ee," âš ï¸ "+s(Pe.value),1)):l("",!0)])}}},[["__scopeId","data-v-95dcb93b"]]);y({__name:"App",setup:e=>(e,a)=>(n(),f(Fe))}).mount("#app");
